<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>b-car: speed.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">b-car
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_93fc9dff28b2cf7641ac9088f61650c0.html">b-car</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">speed.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for speed.h:</div>
<div class="dyncontent">
<div class="center"><img src="speed_8h__incl.png" border="0" usemap="#speed_8h" alt=""/></div>
<map name="speed_8h" id="speed_8h">
<area shape="rect" id="node2" href="config_8h.html" title="Adjust your settings here. " alt="" coords="75,80,143,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="speed_8h__dep__incl.png" border="0" usemap="#speed_8hdep" alt=""/></div>
<map name="speed_8hdep" id="speed_8hdep">
<area shape="rect" id="node2" href="b-car_8h.html" title="b&#45;car.h" alt="" coords="10,80,73,107"/>
<area shape="rect" id="node4" href="car__basics_8ino.html" title="Basic car functionality. " alt="" coords="97,80,204,107"/>
<area shape="rect" id="node5" href="speed_8ino.html" title="Measure speed. " alt="" coords="229,80,307,107"/>
<area shape="rect" id="node3" href="b-car_8ino.html" title="Main file. " alt="" coords="5,155,77,181"/>
</map>
</div>
</div>
<p><a href="speed_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adbd34b4269ed16bd87a0d13cb17bdf81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#adbd34b4269ed16bd87a0d13cb17bdf81">BRAKETIME</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:adbd34b4269ed16bd87a0d13cb17bdf81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae87a94769934715c309733cfdf2abcb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#ae87a94769934715c309733cfdf2abcb4">setup_interrupt</a> ()</td></tr>
<tr class="separator:ae87a94769934715c309733cfdf2abcb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc7b1718f9b23966dfed24056f67996f"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#afc7b1718f9b23966dfed24056f67996f">getspeed</a> ()</td></tr>
<tr class="memdesc:afc7b1718f9b23966dfed24056f67996f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current speed.  <a href="#afc7b1718f9b23966dfed24056f67996f">More...</a><br /></td></tr>
<tr class="separator:afc7b1718f9b23966dfed24056f67996f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa41dbc9d264f533090ac3c808c43171f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#aa41dbc9d264f533090ac3c808c43171f">acceleration</a> (unsigned int newspeed)</td></tr>
<tr class="memdesc:aa41dbc9d264f533090ac3c808c43171f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test for negative accelaration (braking)  <a href="#aa41dbc9d264f533090ac3c808c43171f">More...</a><br /></td></tr>
<tr class="separator:aa41dbc9d264f533090ac3c808c43171f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad56507af5eec4c270def2058efbc3b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#a3ad56507af5eec4c270def2058efbc3b">braking</a> ()</td></tr>
<tr class="memdesc:a3ad56507af5eec4c270def2058efbc3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Braking information.  <a href="#a3ad56507af5eec4c270def2058efbc3b">More...</a><br /></td></tr>
<tr class="separator:a3ad56507af5eec4c270def2058efbc3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2004678343c1f7b145dc10aae949a4ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#a2004678343c1f7b145dc10aae949a4ec">resetspeed</a> ()</td></tr>
<tr class="separator:a2004678343c1f7b145dc10aae949a4ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1b4f1cc5cf5ba94e3bc38f44e0c7001"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#aa1b4f1cc5cf5ba94e3bc38f44e0c7001">getspeedidx</a> ()</td></tr>
<tr class="separator:aa1b4f1cc5cf5ba94e3bc38f44e0c7001"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aded4e91dd554c212e6c75ef7148a7845"><td class="memItemLeft" align="right" valign="top">static volatile byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#aded4e91dd554c212e6c75ef7148a7845">speedidx</a></td></tr>
<tr class="separator:aded4e91dd554c212e6c75ef7148a7845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga605bafc427aaa8e9718a112441ba88a7"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__speed.html#ga605bafc427aaa8e9718a112441ba88a7">speedts</a></td></tr>
<tr class="separator:ga605bafc427aaa8e9718a112441ba88a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66ce79a1ea6b700d56211c146f679649"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#a66ce79a1ea6b700d56211c146f679649">braketime</a></td></tr>
<tr class="separator:a66ce79a1ea6b700d56211c146f679649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63232e097931bc02aa65b3b7dadbb74b"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#a63232e097931bc02aa65b3b7dadbb74b">curspeed</a></td></tr>
<tr class="separator:a63232e097931bc02aa65b3b7dadbb74b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad13fd9ed7295daa9a51dd2fade080e50"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed_8h.html#ad13fd9ed7295daa9a51dd2fade080e50">isbraking</a></td></tr>
<tr class="separator:ad13fd9ed7295daa9a51dd2fade080e50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="adbd34b4269ed16bd87a0d13cb17bdf81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BRAKETIME&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="speed_8h_source.html#l00008">8</a> of file <a class="el" href="speed_8h_source.html">speed.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa41dbc9d264f533090ac3c808c43171f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void acceleration </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>newspeed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test for negative accelaration (braking) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newspeed</td><td>current speed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00096">96</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<a class="anchor" id="a3ad56507af5eec4c270def2058efbc3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool braking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Braking information. </p>
<p>Return true if car is braking. </p><dl class="section return"><dt>Returns</dt><dd>braking state. </dd></dl>

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00116">116</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<a class="anchor" id="afc7b1718f9b23966dfed24056f67996f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int getspeed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get current speed. </p>
<p>The speed is measured as integral of interrupts in an interval of at least 256ms. The smallest measurable speed is one interrupt per 256ms. This function returns an unsigned integer, so the smallest value above 0 should be 1. To get this result the count of interrupts is bit shifted by 8.</p>
<p>1&lt;&lt;8 = 256; 256/256 = 1</p>
<p>But what does 1 represent?</p>
<p>I put 16 interrupt marks to tire of my Bobby Car. One interrupt every 250 ms are 15 rpm (revolutions per minute).</p>
<p>My Bobby Car has a tire diameter of about 153 mm. So the circumference is 478mm (d*pi).</p>
<p>478mm * 15 rpm = 0.4302 km/h</p>
<dl class="section return"><dt>Returns</dt><dd>current speed. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__speed.html#ga44395845abd4a9c31e4fbe88ed717fa3">ISR(PCINT_VECTOR)</a> </dd>
<dd>
<a class="el" href="car__basics_8h.html#ac7295d1018b2b948084ba5dbacf09d74" title="Display the current speed on tacho_row LEDs. ">tacho()</a> </dd></dl>

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00070">70</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<a class="anchor" id="aa1b4f1cc5cf5ba94e3bc38f44e0c7001"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte getspeedidx </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00129">129</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<a class="anchor" id="a2004678343c1f7b145dc10aae949a4ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetspeed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00121">121</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<a class="anchor" id="ae87a94769934715c309733cfdf2abcb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_interrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00019">19</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a66ce79a1ea6b700d56211c146f679649"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long braketime</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00015">15</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<a class="anchor" id="a63232e097931bc02aa65b3b7dadbb74b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int curspeed</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00016">16</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<a class="anchor" id="ad13fd9ed7295daa9a51dd2fade080e50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isbraking</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="speed_8ino_source.html#l00017">17</a> of file <a class="el" href="speed_8ino_source.html">speed.ino</a>.</p>

</div>
</div>
<a class="anchor" id="aded4e91dd554c212e6c75ef7148a7845"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile byte speedidx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="speed_8h_source.html#l00009">9</a> of file <a class="el" href="speed_8h_source.html">speed.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
